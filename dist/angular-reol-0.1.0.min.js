/*! angular-reol 20-05-2013 */
(function(){"use strict";angular.module("reol",[]).factory("Reol",["$parse",function(n){function t(n){var t=this;this.index={},this.indexes={},angular.forEach(n,function(r){t.index[r]={},t.indexes[r]=n[r]})}function r(t,r){var i="";return r[t]?i=angular.toJson(r[t]):t.indexOf(".")&&(i=angular.toJson(n(t)(r))),this.index[t].hasOwnProperty(i)?!1:(this.index[t][i]=r,!0)}return t.prototype=Array.prototype,t.prototype.add=function(n,t){var i,o=this;if(t=t||angular.noop,!angular.isObject(n)){if(i=Error("Sorry, this class only works with objects."),!t)throw i;t(i)}return this.push(n),angular.forEach(this.indexes,function(t){r.call(o,t,n)}),this},t.prototype.merge=function(n,t){var r,i;for(r=0,i=n.length;i>r;r++)this.add(n[r]);return t&&t(),this},t.prototype.find=function(n,t,r){var i,o,e;t=t||angular.noop;for(o in n)if(n.hasOwnProperty(o)){i=o;break}return i?(e=this.index[i]?this.findInIndex(i,n[i])||[]:this.findInList(i,n[i],r),e=!e&&[]||angular.isUndefined(e.length)&&e||[e],t(null,e),e):(t(this.toArray()),this.toArray())},t.prototype.findOne=function(n,t){return this.find(n,function(n,r){t&&t(n,r[0])},!0)[0]},t.prototype.findInIndex=function(n,t){return this.index[n][angular.toJson(t)]},t.prototype.findInList=function(n,t,r){var i,o,e=[],s=this;for(i=0,o=s.length;o>i&&(!s[i].hasOwnProperty(n)||s[i][n]!==t||(e.push(s[i]),!r));i++);return e},t.prototype.toArray=function(){return this},function(n){return new t(n)}}])})();